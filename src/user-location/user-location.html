<html><head><link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/iron-timer/iron-timer.html">


</head><body><dom-module id="user-location">
  <template>
    <div>
      <iron-timer id="locationTimer" start-time="[[updateRate]]" current-time="0" on-iron-timer-end="_onTimerEnd"></iron-timer>
    </div>
  </template>
  <script>Polymer({is:"user-location",properties:{latitude:{type:Number,notify:!0,readOnly:!0},longitude:{type:Number,notify:!0,readOnly:!0},updateRate:{type:Number,notify:!0,readOnly:!0,value:2},active:{type:Boolean,value:!1},currentSite:{type:Object},devMode:{type:Boolean,notify:!0},_first:{type:Boolean,value:!0}},observers:["_devModeCheck(devMode)"],ready:function(){this.$.locationTimer.start(),this._updatePosition()},_updatePosition:function(t){var e=this;navigator.geolocation.getCurrentPosition(function(t){if(e.active||e._first){e._first=!1;var i=t.coords;e._setLatitude(i.latitude),e._setLongitude(i.longitude),document.location.host.startsWith("localhost")&&console.log("Latitude is ",e.latitude," and longitude is ",e.longitude)}})},_devModeCheck:function(t){1==t&&this.$.locationTimer.pause()},_onTimerEnd:function(){this.active&&this._updatePosition(),this.$.locationTimer.reset(),this.$.locationTimer.start()}});</script>
</dom-module></body></html>