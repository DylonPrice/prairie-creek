<html><head><link rel="import" href="../../bower_components/polymer/polymer.html">

</head><body><dom-module id="user-location">
  <script>Polymer({is:"user-location",properties:{latitude:{type:Number,notify:!0,readOnly:!0},longitude:{type:Number,notify:!0,readOnly:!0},updateRate:{type:Number,notify:!0,readOnly:!0,value:2},active:{type:Boolean,value:!1},currentSite:{type:Object},error:{type:String,notify:!0}},ready:function(){if("geolocation"in navigator){navigator.geolocation.getCurrentPosition(this._updatePosition(),this._onError()),navigator.geolocation.watchPosition(this._onPositionChanged(),this._onError())}else alert("Geolocation not available on this device."),console.log("Geolocation not available")},_onError:function(o){var e=this;return function(o){switch(o.code){case o.PERMISSION_DENIED:e.error="Permission denied";break;case o.POSITION_UNAVAILABLE:e.error="Position unavailable";break;case o.TIMEOUT:e.error="Timeout";break;case o.UNKNOWN_ERROR:e.error="Unknown error"}console.log("Geolocation error("+o.code+"): "+e.error)}},_onPositionChanged:function(){var o=this;return function(e){o.active?o._updatePosition()(e):console.log("Ignoring location change; inactive")}},_updatePosition:function(){var o=this;return function(e){var t=e.coords;o._setLatitude(t.latitude),o._setLongitude(t.longitude),console.log("Latitude is ",o.latitude," and longitude is ",o.longitude),o.error=""}}});</script>
</dom-module></body></html>