<html><head><link rel="import" href="../../bower_components/polymer/polymer.html"><link rel="import" href="../../bower_components/paper-button/paper-button.html"><link rel="import" href="../spirit-team/spirit-team.html"><link rel="import" href="../view-behavior/view-behavior.html"><link rel="import" href="../shared-styles/shared-styles.html"><script src="../spirit-selector.js"></script></head><body><dom-module id="team-view"><template><style include="shared-styles">:host{display:block;}spirit-team{height:50vh;}paper-button{margin-left:25%;width:50%;}</style><div class="text">[[_spiritNames]] have come together to protect Prairie Creek Park!</div><spirit-team id="team"></spirit-team><paper-button raised="" on-tap="_next">Play Again</paper-button></template><script>Polymer({is:'team-view',behaviors:[ViewBehavior],properties:{mapData:Object,_spiritNames:String},observers:['_appStateChanged(appState)'],_next:function(){this._goToView('title')},_appStateChanged:function(b){if('team'===b){var c=this._selectedSpirits();this.$.team.images=this._toImageArray(c),this._spiritNames=this._makeNameString(c)}},_selectedSpirits:function(){for(var d,b=[],c=0;c<this.mapData.length;c++)d=selectSpirit(this.mapData[c]),b.push(d);return this._shuffle(b),b},_shuffle:function(b){var c,d,e;for(e=b.length;e;e--)c=Math.floor(Math.random()*e),d=b[e-1],b[e-1]=b[c],b[c]=d},_toImageArray:function(b){for(var c=[],d=0;d<b.length;d++)c.push(b[d].image);return c},_makeNameString:function(b){for(var c='',d=0;d<b.length;d++)c+=b[d].text.name,d<b.length-1&&(c+=', '),d===b.length-2&&(c+='and ');return c}});</script></dom-module></body></html>