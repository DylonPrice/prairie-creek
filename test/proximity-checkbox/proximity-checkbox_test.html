<html>
  <head>
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
    <title>proximity-checkbox tdd-test</title>

    <script src="../bower_components/webcomponentsjs/webcomponents-lite.js"></script>
    <script src="../bower_components/web-component-tester/browser.js"></script>

    <link rel="import" href="../src/proximity-checkbox.html">
  </head>
  <body>

  <test-fixture id="at-location">
    <template>
      <proximity-checkbox
        marker-latitude = "10"
        marker-longitude = "10"
        current-latitude = "10"
        current-longitude = "10">
      </proximity-checkbox>
    </template>
  </test-fixture>

  <test-fixture id="off-location-within-range">
    <template>
      <proximity-checkbox
        marker-latitude = "10"
        marker-longitude = "10"
        current-latitude = "13"
        current-longitude = "14"
        range="10">
      </proximity-checkbox>
    </template>
  </test-fixture>

  <test-fixture id="off-location-out-of-range">
    <template>
      <proximity-checkbox
        marker-latitude = "10"
        marker-longitude = "10"
        current-latitude = "13"
        current-longitude = "14"
        range="0.0015">
      </proximity-checkbox>
    </template>
  </test-fixture>

  <script>
    suite('proximity tests at location', function() {
      var element;

      setup(function() {
        element = fixture('at-location');
      });

      test('distance is zero at exact location', function() {
        assert.equal(0, element.distance);
      });

    });

    suite('proximity tests away from location', function() {
      var element;

      setup(function() {
        element = fixture('off-location-within-range');
      });

      test('distance is computed correctly for 3/4/5 triangle', function() {
        assert.equal(5, element.distance);
      });

      test('checkbox is marked since distance < range', function() {
        assert.equal(true, element.checked);
      });
    });

    suite('proximity tests away from location and out of range', function() {
      var element;

      setup(function() {
        element = fixture('off-location-out-of-range');
      });

      test('distance is computed correctly for 3/4/5 triangle', function() {
        assert.equal(5, element.distance);
      });

      test('checkbox is unmarked', function() {
        assert.equal(false, element.checked);
      })
    })
  </script>

  </body>
</html>
